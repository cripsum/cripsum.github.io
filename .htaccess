php_value session.gc_maxlifetime 604800
php_value session.cookie_lifetime 604800
php_value session.gc_probability 1
php_value session.gc_divisor 1000

RewriteEngine On

RewriteCond %{REQUEST_FILENAME}.html -f
RewriteRule ^(.*)$ $1.html [L]

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^(.*)$ $1.php [L]

RewriteCond %{HTTP_HOST} ^www\.(.+)$ [NC]
RewriteRule ^ https://%1%{REQUEST_URI} [R=301,L]

AddDefaultCharset UTF-8

<FilesMatch "^\.">
  Order allow,deny
  Deny from all
</FilesMatch>

RewriteEngine On
RewriteRule ^user/([a-zA-Z0-9_]+)$ user.php?username=$1 [L,QSA]

RewriteCond %{REQUEST_FILENAME} -f
RewriteRule ^ - [L]

# NON riscrivere cartelle fisiche esistenti
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Escludi cartelle statiche (assets)
RewriteCond %{REQUEST_URI} !^/(css|js|img|audio|vid|api|config|includes|data|mc|random stuff|secure|user)/

# Escludi file statici generici
RewriteCond %{REQUEST_URI} !\.(css|js|png|jpg|jpeg|gif|webp|svg|ico|webm|mp4|ogg|wav|json|txt|html|woff|woff2)$

# Evita loop: non riscrivere se già dentro /it
RewriteCond %{REQUEST_URI} !^/it/

# URL pulita → usa /it come sorgente
RewriteRule ^(.+)$ /it/$1 [L]

# Se l'utente apre /it/... → mostra /...