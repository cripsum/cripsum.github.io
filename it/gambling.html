<!DOCTYPE html>
<html lang="en">
    <head>
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
            crossorigin="anonymous"
        />
        <link rel="icon" href="../img/Susremaster.png" type="image/png" />
        <link rel="shortcut icon" href="../img/Susremaster.png" type="image/png" />
        <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />
        <link rel="stylesheet" href="../css/style.css" />
        <meta charset="UTF-8" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Cripsumâ„¢</title>
        <style>
            img {
                border-radius: 10px;
            }
        </style>
    </head>
    <body>
        <nav class="navbar navbar-expand-xl bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="home">
                    <img src="../img/amongus.jpg" height="40px" style="border-radius: 4px" class="d-inline-block align-middle" />
                    <span class="align-middle ms-3 fw-bold">Cripsumâ„¢</span>
                </a>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="home">Home page</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="shitpost">Shitpost</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="tiktokpedia">TikTokPedia</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="donazioni">Donazioni</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">Download</a>
                            <ul class="dropdown-menu">
                                <li><a class="dropdown-item" href="download">downloads</a></li>
                                <li><a class="dropdown-item" href="download/osu">osu!</a></li>
                                <li><a class="dropdown-item" href="download/fortnite">Fortnite Hack</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="negozio">Negozio</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="merch">Merch</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="chisiamo">Chi siamo</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="edits">Edits</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="accedi">Accedi</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="registrati">Registrati</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="quandel57" style="color: red; font-weight: bold">Quandel57</a>
                        </li>
                    </ul>
                </div>
                <!--
            <a id="btnSwitch" class="ms-auto me-4">d<img src="" /></a>
            --></div>
            <div class="btn-group dropstart ms-auto me-2 lingua">
                <button type="button" class="btn dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">ðŸ‡®ðŸ‡¹</button>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="#">ðŸ‡®ðŸ‡¹ Ita</a></li>
                    <li><a class="dropdown-item" href="../en/gambling">ðŸ‡¬ðŸ‡§ Eng</a></li>
                </ul>
            </div>
            <button
                style="margin-right: 10px"
                class="navbar-toggler lingua"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
            >
                <span class="navbar-toggler-icon"></span>
            </button>
        </nav>
        <div class="account-bar" id="account-bar" style="padding-top: 1%; padding-bottom: 1%; margin: auto">
            <span class="" style="padding-left: 25px; font-weight: bold">Utente: </span>
            <span class="account-name" style="padding-left: 10px; padding-right: 10px">Account Name</span>
            <div style="padding-left: 25px">
                <span class="" style="font-weight: bold">Saldo: </span>
                <span class="account-balance" style="padding-left: 10px">$100</span>
            </div>
            <input type="number" class="form-control inputricarica" style="margin-left: 25px; max-width: 200px; margin-top: 10px" placeholder="inserisci denaro" aria-label="Last name" />
            <button class="button-13" style="width: 150px; margin-left: 25px; margin-top: 5px" onclick="ricaricasaldo();">Ricarica saldo</button>

            <p class="errorericarica" style="color: red; margin-top: 3px; margin-left: 25px"></p>
        </div>

        <div class="input-container" style="text-align: center; padding-top: 3%; max-width: 500px; margin: auto" id="accesso-gambling">
            <div class="row" style="margin: auto">
                <div class="col">
                    <input type="text" id="name-input" class="form-control" placeholder="inserisci il tuo nome" aria-label="First name" />
                </div>
                <div class="col" style="max-width: 200px">
                    <input type="number" id="money-input" class="form-control" placeholder="inserisci denaro" aria-label="Last name" />
                </div>
            </div>
            <button class="button-13" style="margin-top: 10px" onclick="updateAccount()">Accedi</button>
            <p id="errore" class="errore text-center" style="color: red; margin-top: 3px"></p>
        </div>
        <div style="max-width: 1200px; margin: auto">
            <div id="slot-machine" class="d-flex justify-content-center image-container" style="padding-top: 3%; max-width: 80%; margin: auto">
                <div class="slot" style="margin-left: 2%; margin-right: 2%">
                    <img src="../img/cripsumchisiamo.jpg" alt="Image 1" />
                </div>
                <div class="slot" style="margin-left: 2%; margin-right: 2%">
                    <img src="../img/barandeep.jpg" alt="Image 2" />
                </div>
                <div class="slot" style="margin-left: 2%; margin-right: 2%">
                    <img src="../img/abdul.jpg" alt="Image 3" />
                </div>
            </div>
            <!--
            <div class="loading" style="padding-top: 2%;" id="caricamento">
                <span class="loading__dot"></span>
                <span class="loading__dot"></span>
                <span class="loading__dot"></span>
            </div> close_div(1)
            -->

            <div class="button-container" style="text-align: center; margin-top: 3%">
                <button class="purchase-button" onclick="spin()">Spin</button>
            </div>
            <p class="text-center erroresoldi" style="margin-top: 3%; color: red"></p>
            <p class="text-center" id="risultato" style="margin-top: 3%"></p>
        </div>

        <footer class="my-5 pt-5 text-muted text-center text-small">
            <p class="mb-1">Copyright Â© 2021-2024 Cripsumâ„¢. Tutti i diritti riservati.</p>
            <ul class="list-inline">
                <li class="list-inline-item"><a href="privacy">Privacy</a></li>
                <li class="list-inline-item"><a href="tos">Termini</a></li>
                <li class="list-inline-item"><a href="supporto">Supporto</a></li>
            </ul>
        </footer>
        <script>
            function ricaricasaldo() {
                document.getElementsByClassName("errorericarica")[0].textContent = "";
                var inputMoney = document.getElementsByClassName("inputricarica")[0].value;
                if (inputMoney !== "" && inputMoney !== "e") {
                    var currentMoney = document.getElementsByClassName("account-balance")[0].textContent;
                    currentMoney = parseInt(currentMoney.substring(1)); // remove the $ sign and convert to integer
                    var newMoney = currentMoney + parseInt(inputMoney);
                    document.getElementsByClassName("account-balance")[0].textContent = "$" + newMoney;
                    document.getElementsByClassName("inputricarica")[0].value = "";
                } else {
                    document.getElementsByClassName("errorericarica")[0].textContent = "Il campo non puÃ² essere vuoto";
                    return;
                }
            }

            document.getElementById("account-bar").style.display = "none";

            function updateAccount() {
                document.getElementsByClassName("errore")[0].textContent = "";
                var name = document.getElementById("name-input").value;
                var money = document.getElementById("money-input").value;
                if (money !== "" && name !== "") {
                    document.getElementsByClassName("erroresoldi")[0].textContent = "";
                    document.getElementById("account-bar").style.display = "block";
                    document.getElementsByClassName("account-balance")[0].textContent = "$" + money;
                    document.getElementById("money-input").value = "";
                    document.getElementsByClassName("account-name")[0].textContent = name;
                    document.getElementById("name-input").value = "";
                    document.getElementById("accesso-gambling").style.display = "none";
                } else {
                    document.getElementsByClassName("errore")[0].textContent = "i campi non possono essere vuoti";
                }
            }
            function spin() {
                if (document.getElementById("account-bar").style.display === "none") {
                    document.getElementsByClassName("erroresoldi")[0].textContent = "Devi effettuare l'accesso per giocare";
                    return;
                }
                var money = document.getElementsByClassName("account-balance")[0].textContent;
                money = parseInt(money.substring(1)); // remove the $ sign and convert to integer

                if (money >= 10) {
                    money -= 10; // subtract 10 from the money count
                    document.getElementsByClassName("account-balance")[0].textContent = "$" + money; // update the money count display
                } else {
                    document.getElementsByClassName("erroresoldi")[0].textContent = "Saldo insufficiente"; // display an error message if there are not enough funds
                    return;
                }

                document.getElementById("risultato").textContent = "";
                document.getElementsByClassName("erroresoldi")[0].textContent = "";
                // Get the slot elements
                var slots = document.getElementsByClassName("slot");

                // Generate random indexes for the images
                var randomIndexes = [];
                for (var i = 0; i < slots.length; i++) {
                    var randomIndex = Math.floor(Math.random() * 9) + 1;
                    randomIndexes.push(randomIndex);
                }

                // Set the initial image sources
                for (var i = 0; i < slots.length; i++) {
                    slots[i].getElementsByTagName("img")[0].src = "../img/slott" + randomIndexes[i] + ".jpg";
                }

                // Spin the images for 5 seconds
                var startTime = Date.now();
                var interval = setInterval(function () {
                    // Generate new random indexes for the images
                    randomIndexes = [];
                    for (var i = 0; i < slots.length; i++) {
                        var randomIndex = Math.floor(Math.random() * 9) + 1;
                        randomIndexes.push(randomIndex);
                    }

                    // Set the new image sources
                    for (var i = 0; i < slots.length; i++) {
                        slots[i].getElementsByTagName("img")[0].src = "../img/slott" + randomIndexes[i] + ".jpg";
                    }

                    // Check if all images are the same after 5 seconds
                    if (Date.now() - startTime >= 5000) {
                        if (randomIndexes[0] === randomIndexes[1] && randomIndexes[1] === randomIndexes[2]) {
                            document.getElementById("risultato").textContent = "Hai Vinto!";
                            money += 100; // add 100 to the money count
                            document.getElementsByClassName("account-balance")[0].textContent = "$" + money; // update the money count display
                        } else {
                            document.getElementById("risultato").textContent = "Hai perso scemo, ritenta!";
                        }
                        clearInterval(interval);
                    }
                }, 100);
            }

            // function close_div(id) {
            //     document.getElementById("caricamento").style.display = "none";
            // }
        </script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
            crossorigin="anonymous"
        ></script>
        <script src="../js/modeChanger.js"></script>
    </body>
</html>
